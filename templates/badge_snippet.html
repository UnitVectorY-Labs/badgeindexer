{{define "badge_snippet.html"}}
<section>
    <h1>{{.Name}}</h1>
    <div class="repo-info">
        <div class="info-grid">
            <div class="info-item">
                <span class="label">Badge</span>
                <span class="value"><img src="{{.ImageURL}}" alt="{{.Name}}" loading="lazy"></span>
            </div>
            <div class="info-item">
                <span class="label">Category</span>
                <span class="value">{{.Category}}</span>
            </div>
            <div class="info-item">
                <span class="label">Used By</span>
                <span class="value">{{len .Repositories}} repositories</span>
            </div>
        </div>
    </div>
</section>

<section>
    <h2>Repositories Using This Badge</h2>
    <div class="repo-table">
        <div class="repo-table-header">
            <div class="badge-cell-header">Badge</div>
            <div class="repo-name-header">Repository</div>
        </div>
        {{range .Repositories}}
        <div class="repo-row">
            <div class="badge-cell">
                <a href="{{.TargetURL}}" target="_blank">
                    <img src="{{.ImageURL}}" alt="Badge" loading="lazy">
                </a>
            </div>
            <div class="repo-name-cell">
                <a href="/repos/{{.RepoName | urlize}}.html" hx-get="/snippets/repos/{{.RepoName | urlize}}.html" hx-target="#content" hx-push-url="/repos/{{.RepoName | urlize}}.html">{{.RepoName}}</a>
            </div>
        </div>
        {{end}}
    </div>
</section>
{{end}}
