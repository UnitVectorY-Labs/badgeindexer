{{define "repo_snippet.html"}}
<section>
    <h1>{{.Repository.Repository}}</h1>
    <div class="repo-info">
        <div class="info-grid">
            <div class="info-item">
                <span class="label">Repository</span>
                <span class="value">
                    <a href="{{.Repository.RepositoryURL}}" target="_blank">{{.Repository.Repository}}</a>
                </span>
            </div>
            <div class="info-item">
                <span class="label">Default Branch</span>
                <span class="value">{{.Repository.DefaultBranch}}</span>
            </div>
            <div class="info-item">
                <span class="label">Badges Found</span>
                <span class="value">{{len .Repository.Badges}}</span>
            </div>
        </div>
    </div>
</section>

<section>
    <h2>Badges</h2>
    {{if not .Repository.ReadmeFound}}
    <p class="muted-text">No README found in this repository. Badges cannot be detected without a README.</p>
    {{else if .Badges}}
    <div class="repo-table">
        <div class="repo-table-header">
            <div class="badge-cell-header">Badge</div>
            <div class="repo-name-header">Name</div>
        </div>
        {{range .Badges}}
        <div class="repo-row">
            <div class="badge-cell">
                <a href="{{.TargetURL}}" target="_blank">
                    <img src="{{.ImageURL}}" alt="{{.AltText}}" loading="lazy">
                </a>
            </div>
            <div class="repo-name-cell">
                <a href="/badges/{{.ID}}.html" hx-get="/snippets/badges/{{.ID}}.html" hx-target="main" hx-push-url="/badges/{{.ID}}.html">{{.Category}}: {{.Name}}</a>
            </div>
        </div>
        {{end}}
    </div>
    {{else}}
    <p class="muted-text">No badges detected in this repository's README.</p>
    {{end}}
</section>
{{end}}
